/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (function () {
    /******/ "use strict";
    /******/ var __webpack_modules__ = ({
        /***/ "./src/styles/main.scss": 
        /*!******************************!*\
          !*** ./src/styles/main.scss ***!
          \******************************/
        /***/ (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://match-game/./src/styles/main.scss?");
            /***/ 
        }),
        /***/ "./src/components/play/card.ts": 
        /*!*************************************!*\
          !*** ./src/components/play/card.ts ***!
          \*************************************/
        /***/ (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar Card = /** @class */ (function () {\r\n    function Card(category, type) {\r\n        var _this = this;\r\n        this.category = category;\r\n        this.type = type;\r\n        this.IMAGES_URL = '../../src/assets/images/categories/';\r\n        this.createElement = function () {\r\n            var srcFront = \"\" + _this.IMAGES_URL + _this.category + \"/cover.png\";\r\n            var srcBack = \"\" + _this.IMAGES_URL + _this.category + \"/types/\" + _this.type + \".png\";\r\n            var card = document.createElement('div');\r\n            card.classList.add('card');\r\n            var frontCard = document.createElement('img');\r\n            frontCard.classList.add('card__front');\r\n            frontCard.src = srcFront;\r\n            frontCard.alt = 'card';\r\n            var backCard = document.createElement('img');\r\n            backCard.classList.add('card__back');\r\n            backCard.src = srcBack;\r\n            backCard.alt = 'card';\r\n            card.appendChild(frontCard);\r\n            card.appendChild(backCard);\r\n            card.dataset.type = _this.type.toString();\r\n            return card;\r\n        };\r\n        this.category = category;\r\n        this.type = type;\r\n    }\r\n    return Card;\r\n}());\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Card);\r\n\n\n//# sourceURL=webpack://match-game/./src/components/play/card.ts?");
            /***/ 
        }),
        /***/ "./src/components/play/index.ts": 
        /*!**************************************!*\
          !*** ./src/components/play/index.ts ***!
          \**************************************/
        /***/ (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Play\": () => (/* reexport safe */ _play__WEBPACK_IMPORTED_MODULE_0__.default),\n/* harmony export */   \"Playground\": () => (/* reexport safe */ _playground__WEBPACK_IMPORTED_MODULE_1__.default),\n/* harmony export */   \"Timer\": () => (/* reexport safe */ _timer__WEBPACK_IMPORTED_MODULE_2__.default)\n/* harmony export */ });\n/* harmony import */ var _play__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./play */ \"./src/components/play/play.ts\");\n/* harmony import */ var _playground__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./playground */ \"./src/components/play/playground.ts\");\n/* harmony import */ var _timer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./timer */ \"./src/components/play/timer.ts\");\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://match-game/./src/components/play/index.ts?");
            /***/ 
        }),
        /***/ "./src/components/play/play.ts": 
        /*!*************************************!*\
          !*** ./src/components/play/play.ts ***!
          \*************************************/
        /***/ (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _timer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timer */ \"./src/components/play/timer.ts\");\n/* harmony import */ var _playground__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./playground */ \"./src/components/play/playground.ts\");\n/* harmony import */ var _settings_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../settings-storage */ \"./src/settings-storage.ts\");\n/* harmony import */ var _user_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../user-storage */ \"./src/user-storage.ts\");\n\r\n\r\n\r\n\r\nvar Play = /** @class */ (function () {\r\n    function Play() {\r\n        var _this = this;\r\n        this.TIME_OVER_MS = 300500;\r\n        this.start = function () {\r\n            var playGroundElement = document.body.querySelector('.playground');\r\n            var elementTimer = document.body.querySelector('.timer__label');\r\n            _this.playground = new _playground__WEBPACK_IMPORTED_MODULE_1__.default(playGroundElement, _this.settings);\r\n            _this.timer = new _timer__WEBPACK_IMPORTED_MODULE_0__.default(elementTimer);\r\n            _this.playground.start();\r\n            _this.timer.start();\r\n            _this.scheduleTimeOver();\r\n            playGroundElement.addEventListener('click', _this.clickHandler);\r\n            window.addEventListener('hashchange', _this.destroy);\r\n        };\r\n        this.restart = function () {\r\n            _this.prevCardElement = null;\r\n            _this.foundCardsCounter = 0;\r\n            _this.playground.start();\r\n            _this.timer.start();\r\n            _this.scheduleTimeOver();\r\n        };\r\n        this.scheduleTimeOver = function () {\r\n            _this.timeOverTimerId = setTimeout(_this.timeOverHandler, _this.TIME_OVER_MS);\r\n        };\r\n        this.clickHandler = function (event) {\r\n            if (_this.isRotateInProcess) {\r\n                return;\r\n            }\r\n            var currentElement = event.target;\r\n            if (currentElement.classList.contains('card__front')) {\r\n                var cardElement = currentElement.closest('.card');\r\n                if (cardElement.classList.contains('card--hidden')) {\r\n                    return;\r\n                }\r\n                cardElement.classList.toggle('card--rotate');\r\n                if (_this.prevCardElement) {\r\n                    _this.handleTwoOpenedCards(cardElement);\r\n                }\r\n                else {\r\n                    _this.prevCardElement = cardElement;\r\n                }\r\n            }\r\n        };\r\n        this.handleTwoOpenedCards = function (cardElement) {\r\n            if (_this.prevCardElement.dataset.type === cardElement.dataset.type) {\r\n                _this.prevCardElement.classList.add('card--hidden');\r\n                cardElement.classList.add('card--hidden');\r\n                _this.prevCardElement = null;\r\n                _this.foundCardsCounter += 2;\r\n                _this.checkIsGameOver();\r\n            }\r\n            else {\r\n                _this.isRotateInProcess = true;\r\n                _this.backRotateTimerId = setTimeout(function () {\r\n                    _this.rotateBack(_this.prevCardElement, cardElement);\r\n                    _this.prevCardElement = null;\r\n                    _this.isRotateInProcess = false;\r\n                }, 500);\r\n            }\r\n        };\r\n        this.rotateBack = function (prevCardElement, cardElement) {\r\n            prevCardElement.classList.toggle('card--rotate');\r\n            cardElement.classList.toggle('card--rotate');\r\n        };\r\n        this.checkIsGameOver = function () {\r\n            if (_this.foundCardsCounter === _this.settings.cardsNumber) {\r\n                _this.stop();\r\n                setTimeout(_this.showGameWinMessage, 1000);\r\n            }\r\n        };\r\n        this.timeOverHandler = function () {\r\n            _this.stop();\r\n            _this.showGameOverMessage();\r\n        };\r\n        this.showGameWinMessage = function () {\r\n            if (_user_storage__WEBPACK_IMPORTED_MODULE_3__.default.currentUser) {\r\n                _user_storage__WEBPACK_IMPORTED_MODULE_3__.default.updateUser(_this.timer.element.textContent);\r\n            }\r\n            _this.playground.clearScene();\r\n            _this.showMessage('You are a winner!!!');\r\n        };\r\n        this.showGameOverMessage = function () {\r\n            _this.playground.clearScene();\r\n            _this.showMessage('Time is over.');\r\n        };\r\n        this.removeMessage = function () {\r\n            if (_this.messageElement) {\r\n                _this.messageElement.parentNode.removeChild(_this.messageElement);\r\n            }\r\n        };\r\n        this.showMessage = function (message) {\r\n            var messageTextElement = document.createElement('p');\r\n            messageTextElement.innerText = message;\r\n            var messageTextWrapperElement = document.createElement('div');\r\n            messageTextWrapperElement.classList.add('game-message__text');\r\n            messageTextWrapperElement.appendChild(messageTextElement);\r\n            var messageMenuButtonElement = document.createElement('a');\r\n            messageMenuButtonElement.classList.add('game-message__button');\r\n            messageMenuButtonElement.innerText = 'Main menu';\r\n            messageMenuButtonElement.href = '#home';\r\n            var messageAgainButtonElement = messageMenuButtonElement.cloneNode(true);\r\n            messageAgainButtonElement.innerText = 'Play again';\r\n            messageAgainButtonElement.href = '#play';\r\n            messageAgainButtonElement.addEventListener('click', function () {\r\n                _this.removeMessage();\r\n                _this.restart();\r\n            });\r\n            var messageButtonWrapperElement = document.createElement('div');\r\n            messageButtonWrapperElement.classList.add('game-message__button-wrapper');\r\n            messageButtonWrapperElement.appendChild(messageMenuButtonElement);\r\n            messageButtonWrapperElement.appendChild(messageAgainButtonElement);\r\n            var messageElement = document.createElement('div');\r\n            messageElement.classList.add('game-message');\r\n            messageElement.appendChild(messageTextWrapperElement);\r\n            messageElement.appendChild(messageButtonWrapperElement);\r\n            document.body.appendChild(messageElement);\r\n            _this.messageElement = messageElement;\r\n        };\r\n        this.stop = function () {\r\n            _this.timer.stop();\r\n            clearTimeout(_this.backRotateTimerId);\r\n            clearTimeout(_this.timeOverTimerId);\r\n        };\r\n        this.destroy = function () {\r\n            _this.stop();\r\n            _this.removeMessage();\r\n            window.removeEventListener('hashchange', _this.destroy);\r\n        };\r\n        this.prevCardElement = null;\r\n        this.isRotateInProcess = false;\r\n        this.backRotateTimerId = undefined;\r\n        this.timeOverTimerId = undefined;\r\n        this.foundCardsCounter = 0;\r\n        this.settings = {\r\n            category: _settings_storage__WEBPACK_IMPORTED_MODULE_2__.default.category,\r\n            cardsNumber: _settings_storage__WEBPACK_IMPORTED_MODULE_2__.default.cardsNumber,\r\n        };\r\n        this.messageElement = null;\r\n        this.timer = null;\r\n    }\r\n    return Play;\r\n}());\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Play);\r\n\n\n//# sourceURL=webpack://match-game/./src/components/play/play.ts?");
            /***/ 
        }),
        /***/ "./src/components/play/playground.ts": 
        /*!*******************************************!*\
          !*** ./src/components/play/playground.ts ***!
          \*******************************************/
        /***/ (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _card__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./card */ \"./src/components/play/card.ts\");\n\r\nvar Playground = /** @class */ (function () {\r\n    function Playground(element, options) {\r\n        var _this = this;\r\n        this.start = function () {\r\n            _this.createCards();\r\n        };\r\n        this.createCards = function () {\r\n            var positions = _this.getPositions(_this.cardsNumber);\r\n            var cards = _this.getCards(_this.cardsTypes, _this.category, _this.pair);\r\n            while (positions.length) {\r\n                var randIndex = _this.getRandomNumber(0, positions.length - 1);\r\n                var randomPosition = positions[randIndex];\r\n                var randomCard = cards[randomPosition];\r\n                var cardElement = randomCard.createElement();\r\n                _this.element.appendChild(cardElement);\r\n                positions.splice(randIndex, 1);\r\n            }\r\n        };\r\n        this.getRandomNumber = function (min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; };\r\n        this.getPositions = function (cardsNumber) {\r\n            var positions = [];\r\n            for (var i = 0; i < cardsNumber; i += 1) {\r\n                positions[i] = i;\r\n            }\r\n            return positions;\r\n        };\r\n        this.getCards = function (cardsTypes, category, pair) {\r\n            var cards = [];\r\n            for (var i = 0; i < cardsTypes; i += 1) {\r\n                for (var j = 0; j < pair; j += 1) {\r\n                    cards.push(new _card__WEBPACK_IMPORTED_MODULE_0__.default(category, i));\r\n                }\r\n            }\r\n            return cards;\r\n        };\r\n        this.clearScene = function () {\r\n            _this.element.innerHTML = '';\r\n        };\r\n        this.element = element;\r\n        this.category = options.category;\r\n        this.cardsNumber = options.cardsNumber;\r\n        this.pair = 2;\r\n        this.cardsTypes = this.cardsNumber / this.pair;\r\n    }\r\n    return Playground;\r\n}());\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Playground);\r\n\n\n//# sourceURL=webpack://match-game/./src/components/play/playground.ts?");
            /***/ 
        }),
        /***/ "./src/components/play/timer.ts": 
        /*!**************************************!*\
          !*** ./src/components/play/timer.ts ***!
          \**************************************/
        /***/ (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar Timer = /** @class */ (function () {\r\n    function Timer(element) {\r\n        var _this = this;\r\n        this.start = function () {\r\n            _this.secondCounter = 0;\r\n            _this.element.innerHTML = '00:00:00';\r\n            _this.timerId = setInterval(_this.displayTime, 1000);\r\n        };\r\n        this.displayTime = function () {\r\n            _this.secondCounter += 1;\r\n            _this.element.textContent = _this.getTimeLabelBySecond(_this.secondCounter);\r\n        };\r\n        this.getTimeLabelBySecond = function (seconds) {\r\n            var hours = Math.floor(seconds / 3600);\r\n            seconds -= hours * 3600;\r\n            var min = Math.floor(seconds / 60);\r\n            seconds -= min * 60;\r\n            var secondView = _this.formatView(seconds);\r\n            var minView = _this.formatView(min);\r\n            var hoursView = _this.formatView(hours);\r\n            return hoursView + \":\" + minView + \":\" + secondView;\r\n        };\r\n        this.formatView = function (time) {\r\n            var result = time.toString();\r\n            if (time < 10) {\r\n                // if (Math.floor(time / 10) < 1) {\r\n                result = \"0\" + time;\r\n            }\r\n            return result;\r\n        };\r\n        this.stop = function () {\r\n            clearInterval(_this.timerId);\r\n        };\r\n        this.element = element;\r\n        this.secondCounter = 0;\r\n        this.timerId = undefined;\r\n    }\r\n    return Timer;\r\n}());\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Timer);\r\n\n\n//# sourceURL=webpack://match-game/./src/components/play/timer.ts?");
            /***/ 
        }),
        /***/ "./src/components/registration/index.ts": 
        /*!**********************************************!*\
          !*** ./src/components/registration/index.ts ***!
          \**********************************************/
        /***/ (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _registration__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./registration */ \"./src/components/registration/registration.ts\");\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_registration__WEBPACK_IMPORTED_MODULE_0__.default);\r\n\n\n//# sourceURL=webpack://match-game/./src/components/registration/index.ts?");
            /***/ 
        }),
        /***/ "./src/components/registration/registration.ts": 
        /*!*****************************************************!*\
          !*** ./src/components/registration/registration.ts ***!
          \*****************************************************/
        /***/ (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _user_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../user-storage */ \"./src/user-storage.ts\");\n/* harmony import */ var _score__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../score */ \"./src/components/score/index.ts\");\n\r\n\r\nvar Registration = /** @class */ (function () {\r\n    function Registration() {\r\n        var _this = this;\r\n        this.button = null;\r\n        this.cancelButton = null;\r\n        this.firstName = null;\r\n        this.lastName = null;\r\n        this.email = null;\r\n        this.testInput = function (value, regex) { return regex.test(value); };\r\n        this.changeForm = function () {\r\n            _this.firstName = document.querySelector('#firstName');\r\n            _this.lastName = document.querySelector('#lastName');\r\n            _this.email = document.querySelector('#email');\r\n            if (_this.firstName.value\r\n                && _this.testInput(_this.firstName.value, /^[a-zA-Z ]*$/)\r\n                && _this.lastName.value\r\n                && _this.testInput(_this.lastName.value, /^[a-zA-Z ]*$/)\r\n                && _this.email.value\r\n                && _this.testInput(_this.email.value, /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/)) {\r\n                _this.button.removeAttribute('disabled');\r\n            }\r\n            else {\r\n                _this.button.setAttribute('disabled', 'disabled');\r\n            }\r\n        };\r\n        this.cancelClick = function () {\r\n            _this.firstName.value = '';\r\n            _this.lastName.value = '';\r\n            _this.email.value = '';\r\n        };\r\n        this.setForm = function (form) {\r\n            form.addEventListener('submit', _this.registrationUser);\r\n            form.addEventListener('input', _this.changeForm);\r\n            _this.button = document.querySelector('#saveUser');\r\n            _this.cancelButton = document.querySelector('#cancelButton');\r\n            _this.button.setAttribute('disabled', 'disabled');\r\n            _this.cancelButton.addEventListener('click', _this.cancelClick);\r\n        };\r\n        this.registrationUser = function (event) {\r\n            event.preventDefault();\r\n            var target = event.target;\r\n            var user = {\r\n                firstName: target[0].value,\r\n                lastName: target[1].value,\r\n                email: target[2].value,\r\n                score: '',\r\n            };\r\n            _user_storage__WEBPACK_IMPORTED_MODULE_0__.default.addUser(user);\r\n            var a = document.createElement('a');\r\n            a.href = '#home';\r\n            a.click();\r\n            a.remove();\r\n        };\r\n        this.getAllUsers = function () {\r\n            var req = _user_storage__WEBPACK_IMPORTED_MODULE_0__.default.openDB();\r\n            var dataArray = [];\r\n            req.onsuccess = function (event) {\r\n                var db = event.target.result;\r\n                var transaction = db.transaction('users', 'readwrite');\r\n                var users = transaction.objectStore('users');\r\n                var request = users.openCursor();\r\n                request.onsuccess = function () {\r\n                    var cursor = request.result;\r\n                    if (cursor) {\r\n                        var value = cursor.value;\r\n                        dataArray.push(value);\r\n                        cursor.continue();\r\n                    }\r\n                    else {\r\n                        var score = new _score__WEBPACK_IMPORTED_MODULE_1__.default(dataArray);\r\n                        score.setData();\r\n                    }\r\n                    return cursor;\r\n                };\r\n            };\r\n            req.onerror = function (_a) {\r\n                var target = _a.target;\r\n                console.log(\"error opening database \" + target.errorCode);\r\n            };\r\n        };\r\n    }\r\n    return Registration;\r\n}());\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Registration);\r\n\n\n//# sourceURL=webpack://match-game/./src/components/registration/registration.ts?");
            /***/ 
        }),
        /***/ "./src/components/score/index.ts": 
        /*!***************************************!*\
          !*** ./src/components/score/index.ts ***!
          \***************************************/
        /***/ (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _score__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./score */ \"./src/components/score/score.ts\");\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_score__WEBPACK_IMPORTED_MODULE_0__.default);\r\n\n\n//# sourceURL=webpack://match-game/./src/components/score/index.ts?");
            /***/ 
        }),
        /***/ "./src/components/score/score.ts": 
        /*!***************************************!*\
          !*** ./src/components/score/score.ts ***!
          \***************************************/
        /***/ (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar Score = /** @class */ (function () {\r\n    function Score(data) {\r\n        this.table = document.querySelector('#tbody');\r\n        this.data = data;\r\n    }\r\n    Score.prototype.setData = function () {\r\n        var data = this.data.map(function (row) { return \"<tr><td>\" + row.firstName + \"</td><td>\" + row.lastName + \"</td><td>\" + row.score + \"</td></tr>\"; });\r\n        this.table.innerHTML += data.join('');\r\n    };\r\n    return Score;\r\n}());\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Score);\r\n\n\n//# sourceURL=webpack://match-game/./src/components/score/score.ts?");
            /***/ 
        }),
        /***/ "./src/components/settings/index.ts": 
        /*!******************************************!*\
          !*** ./src/components/settings/index.ts ***!
          \******************************************/
        /***/ (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./settings */ \"./src/components/settings/settings.ts\");\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_settings__WEBPACK_IMPORTED_MODULE_0__.default);\r\n\n\n//# sourceURL=webpack://match-game/./src/components/settings/index.ts?");
            /***/ 
        }),
        /***/ "./src/components/settings/settings.ts": 
        /*!*********************************************!*\
          !*** ./src/components/settings/settings.ts ***!
          \*********************************************/
        /***/ (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _settings_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../settings-storage */ \"./src/settings-storage.ts\");\n\r\nvar Settings = /** @class */ (function () {\r\n    function Settings() {\r\n        var _this = this;\r\n        this.start = function () {\r\n            _this.difficultyElement = document.body.querySelector('.difficulty__options');\r\n            _this.difficultyElement.addEventListener('click', _this.difficultyClickHandler);\r\n            _this.setCheckedDifficulty();\r\n            _this.categoryElement = document.body.querySelector('.card-categories__options');\r\n            _this.categoryElement.addEventListener('click', _this.categoryClickHandler);\r\n            _this.setCheckedCategory();\r\n        };\r\n        this.setCheckedDifficulty = function () {\r\n            var currentDifficulty = _settings_storage__WEBPACK_IMPORTED_MODULE_0__.default.cardsNumber;\r\n            var difficultyOptionElement = _this.difficultyElement.querySelector(\"[data-difficulty=\\\"\" + currentDifficulty + \"\\\"]\");\r\n            difficultyOptionElement.classList.add('difficulty__options-item--checked');\r\n        };\r\n        this.difficultyClickHandler = function (event) {\r\n            var currentElement = event.target;\r\n            var optionElement = currentElement.closest('.difficulty__options-item');\r\n            if (optionElement) {\r\n                for (var i = 0; i < _this.difficultyElement.children.length; i += 1) {\r\n                    _this.difficultyElement.children[i].classList.remove('difficulty__options-item--checked');\r\n                }\r\n                optionElement.classList.add('difficulty__options-item--checked');\r\n            }\r\n            _settings_storage__WEBPACK_IMPORTED_MODULE_0__.default.cardsNumber = parseInt(optionElement.dataset.difficulty, 10);\r\n        };\r\n        this.setCheckedCategory = function () {\r\n            var currentCategory = _settings_storage__WEBPACK_IMPORTED_MODULE_0__.default.category;\r\n            var categoryOptionElement = _this.categoryElement.querySelector(\"[data-category=\\\"\" + currentCategory + \"\\\"]\");\r\n            categoryOptionElement.classList.add('card-categories__options-item--checked');\r\n        };\r\n        this.categoryClickHandler = function (event) {\r\n            var currentElement = event.target;\r\n            var optionElement = currentElement.closest('.card-categories__options-item');\r\n            if (optionElement) {\r\n                for (var i = 0; i < _this.categoryElement.children.length; i += 1) {\r\n                    _this.categoryElement.children[i].classList.remove('card-categories__options-item--checked');\r\n                }\r\n                optionElement.classList.add('card-categories__options-item--checked');\r\n            }\r\n            _settings_storage__WEBPACK_IMPORTED_MODULE_0__.default.category = parseInt(optionElement.dataset.category, 10);\r\n        };\r\n    }\r\n    return Settings;\r\n}());\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Settings);\r\n\n\n//# sourceURL=webpack://match-game/./src/components/settings/settings.ts?");
            /***/ 
        }),
        /***/ "./src/index.ts": 
        /*!**********************!*\
          !*** ./src/index.ts ***!
          \**********************/
        /***/ (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _styles_main_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./styles/main.scss */ \"./src/styles/main.scss\");\n/* harmony import */ var _router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./router */ \"./src/router.ts\");\n\r\n\r\ndebugger;\r\nvar router = new _router__WEBPACK_IMPORTED_MODULE_1__.default();\r\n\n\n//# sourceURL=webpack://match-game/./src/index.ts?");
            /***/ 
        }),
        /***/ "./src/router.ts": 
        /*!***********************!*\
          !*** ./src/router.ts ***!
          \***********************/
        /***/ (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _components_settings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/settings */ \"./src/components/settings/index.ts\");\n/* harmony import */ var _components_play__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/play */ \"./src/components/play/index.ts\");\n/* harmony import */ var _components_registration__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/registration */ \"./src/components/registration/index.ts\");\n\r\n\r\n\r\nvar Router = /** @class */ (function () {\r\n    function Router() {\r\n        var _this = this;\r\n        this.registration = new _components_registration__WEBPACK_IMPORTED_MODULE_2__.default();\r\n        this.routes = [\r\n            {\r\n                name: 'home',\r\n                url: 'src/components/home/home.html',\r\n                html: '',\r\n            },\r\n            {\r\n                name: 'play',\r\n                url: 'src/components/play/play.html',\r\n                html: '',\r\n                handler: function () {\r\n                    var play = new _components_play__WEBPACK_IMPORTED_MODULE_1__.Play();\r\n                    play.start();\r\n                },\r\n            },\r\n            {\r\n                name: 'settings',\r\n                url: 'src/components/settings/settings.html',\r\n                html: '',\r\n                handler: function () {\r\n                    var setting = new _components_settings__WEBPACK_IMPORTED_MODULE_0__.default();\r\n                    setting.start();\r\n                },\r\n            },\r\n            {\r\n                name: 'about',\r\n                url: 'src/components/about/about.html',\r\n                html: '',\r\n            },\r\n            {\r\n                name: 'registration',\r\n                url: 'src/components/registration/registration.html',\r\n                html: '',\r\n                handler: function () {\r\n                    var form = document.querySelector('#registration');\r\n                    _this.registration.setForm(form);\r\n                },\r\n            },\r\n            {\r\n                name: 'score',\r\n                url: 'src/components/score/score.html',\r\n                html: '',\r\n                handler: function () {\r\n                    _this.registration.getAllUsers();\r\n                },\r\n            },\r\n        ];\r\n        this.hashChangeHandler = function (_a) {\r\n            var newURL = _a.newURL;\r\n            var splitUrl = newURL.split('#');\r\n            var newState = splitUrl[1];\r\n            _this.updateRoute(newState);\r\n        };\r\n        this.updateRoute = function (name) {\r\n            var route = _this.routes.find(function (r) {\r\n                if (r.name === name) {\r\n                    return r;\r\n                }\r\n                return undefined;\r\n            });\r\n            _this.loadTemplateHtml(route.url, function (templateHtml) {\r\n                var mainElement = document.body;\r\n                mainElement.innerHTML = templateHtml;\r\n                if (route.handler) {\r\n                    route.handler();\r\n                }\r\n            });\r\n        };\r\n        this.loadTemplateHtml = function (url, callback) {\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.open('GET', url, true);\r\n            xhr.send();\r\n            xhr.addEventListener('readystatechange', function () {\r\n                if (xhr.readyState === 4 && xhr.status === 200) {\r\n                    callback(xhr.responseText);\r\n                }\r\n            });\r\n        };\r\n        window.location.hash = '#home';\r\n        this.updateRoute('home');\r\n        window.addEventListener('hashchange', this.hashChangeHandler);\r\n    }\r\n    return Router;\r\n}());\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Router);\r\n\n\n//# sourceURL=webpack://match-game/./src/router.ts?");
            /***/ 
        }),
        /***/ "./src/settings-storage.ts": 
        /*!*********************************!*\
          !*** ./src/settings-storage.ts ***!
          \*********************************/
        /***/ (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar SettingsStorage = /** @class */ (function () {\r\n    function SettingsStorage() {\r\n        this.global = window.global || {};\r\n    }\r\n    Object.defineProperty(SettingsStorage, \"category\", {\r\n        get: function () {\r\n            return this.currentCategory;\r\n        },\r\n        set: function (category) {\r\n            this.currentCategory = category;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SettingsStorage, \"cardsNumber\", {\r\n        get: function () {\r\n            return this.number;\r\n        },\r\n        set: function (number) {\r\n            this.number = number;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    SettingsStorage.currentCategory = 0;\r\n    SettingsStorage.number = 8;\r\n    return SettingsStorage;\r\n}());\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SettingsStorage);\r\n\n\n//# sourceURL=webpack://match-game/./src/settings-storage.ts?");
            /***/ 
        }),
        /***/ "./src/user-storage.ts": 
        /*!*****************************!*\
          !*** ./src/user-storage.ts ***!
          \*****************************/
        /***/ (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
            eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar UserStorage = /** @class */ (function () {\r\n    function UserStorage() {\r\n    }\r\n    UserStorage.openDB = function () {\r\n        var _this = this;\r\n        this.openRequest = indexedDB.open('6677811', 1);\r\n        this.openRequest.onupgradeneeded = function (event) {\r\n            _this.db = event.target.result;\r\n            _this.users = _this.db.createObjectStore('users', {\r\n                autoIncrement: true,\r\n            });\r\n        };\r\n        this.openRequest.onsuccess = function (event) {\r\n            _this.db = event.target.result;\r\n        };\r\n        this.openRequest.onerror = function (event) {\r\n            console.log(\"error opening database \" + event.target.errorCode);\r\n        };\r\n        return this.openRequest;\r\n    };\r\n    UserStorage.addUser = function (user) {\r\n        var _this = this;\r\n        var req = this.openDB();\r\n        req.onsuccess = function (event) {\r\n            var db = event.target.result;\r\n            var transaction = db.transaction('users', 'readwrite');\r\n            var users = transaction.objectStore('users');\r\n            var request = users.add(user);\r\n            request.onsuccess = function () {\r\n                _this.currentUser = request.result;\r\n            };\r\n        };\r\n        req.onerror = function (event) {\r\n            console.log(\"error opening database \" + event.target.errorCode);\r\n        };\r\n    };\r\n    UserStorage.updateUser = function (score) {\r\n        var _this = this;\r\n        var req = this.openDB();\r\n        req.onsuccess = function (event) {\r\n            var db = event.target.result;\r\n            var transaction = db.transaction('users', 'readwrite');\r\n            var users = transaction.objectStore('users');\r\n            var getUser = users.get(_this.currentUser);\r\n            getUser.onsuccess = function () {\r\n                var user = getUser.result;\r\n                if (user.score.length) {\r\n                    var split = user.score.split(':');\r\n                    var seconds = +split[0] * 60 * 60 + +split[1] * 60 + +split[2];\r\n                    var splitNew = score.split(':');\r\n                    var secondsNew = +splitNew[0] * 60 * 60\r\n                        + +splitNew[1] * 60\r\n                        + +splitNew[2];\r\n                    if (secondsNew < seconds) {\r\n                        _this.updateUserScore(score, user, users, _this.currentUser);\r\n                    }\r\n                }\r\n                else {\r\n                    _this.updateUserScore(score, user, users, _this.currentUser);\r\n                }\r\n            };\r\n        };\r\n        req.onerror = function (event) {\r\n            console.log(\"error opening database \" + event.target.errorCode);\r\n        };\r\n    };\r\n    UserStorage.updateUserScore = function (score, user, users, currentUser) {\r\n        user.score = score;\r\n        var request = users.put(user, currentUser);\r\n        request.onsuccess = function () {\r\n            currentUser = request.result;\r\n        };\r\n    };\r\n    UserStorage.currentUser = 0;\r\n    return UserStorage;\r\n}());\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UserStorage);\r\n\n\n//# sourceURL=webpack://match-game/./src/user-storage.ts?");
            /***/ 
        })
        /******/ 
    });
    /************************************************************************/
    /******/ // The module cache
    /******/ var __webpack_module_cache__ = {};
    /******/
    /******/ // The require function
    /******/ function __webpack_require__(moduleId) {
        /******/ // Check if module is in cache
        /******/ var cachedModule = __webpack_module_cache__[moduleId];
        /******/ if (cachedModule !== undefined) {
            /******/ return cachedModule.exports;
            /******/ }
        /******/ // Create a new module (and put it into the cache)
        /******/ var module = __webpack_module_cache__[moduleId] = {
            /******/ // no module.id needed
            /******/ // no module.loaded needed
            /******/ exports: {}
            /******/ 
        };
        /******/
        /******/ // Execute the module function
        /******/ __webpack_modules__[moduleId](module, module.exports, __webpack_require__);
        /******/
        /******/ // Return the exports of the module
        /******/ return module.exports;
        /******/ 
    }
    /******/
    /************************************************************************/
    /******/ /* webpack/runtime/define property getters */
    /******/ (function () {
        /******/ // define getter functions for harmony exports
        /******/ __webpack_require__.d = function (exports, definition) {
            /******/ for (var key in definition) {
                /******/ if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
                    /******/ Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
                    /******/ }
                /******/ }
            /******/ 
        };
        /******/ 
    })();
    /******/
    /******/ /* webpack/runtime/hasOwnProperty shorthand */
    /******/ (function () {
        /******/ __webpack_require__.o = function (obj, prop) { return (Object.prototype.hasOwnProperty.call(obj, prop)); };
        /******/ 
    })();
    /******/
    /******/ /* webpack/runtime/make namespace object */
    /******/ (function () {
        /******/ // define __esModule on exports
        /******/ __webpack_require__.r = function (exports) {
            /******/ if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {
                /******/ Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
                /******/ }
            /******/ Object.defineProperty(exports, '__esModule', { value: true });
            /******/ 
        };
        /******/ 
    })();
    /******/
    /************************************************************************/
    /******/
    /******/ // startup
    /******/ // Load entry module and return exports
    /******/ // This entry module can't be inlined because the eval devtool is used.
    /******/ var __webpack_exports__ = __webpack_require__("./src/index.ts");
    /******/
    /******/ 
})();
